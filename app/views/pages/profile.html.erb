<img class="avatar-large" alt="avatar-large" src="https://seedlingsgardening.com/wp-content/uploads/sites/9/2016/11/avatar.jpg" />
<h1><%= @user.nickname %> Nickname</h1>
<h3>Dreamer <%= @user.email %>'s posted dreams:</h3>

<div class="container" id="profile-with-stats">
<!--If the @user IS the current user (own profile)-->
  <% if @user == current_user %>
<!--Go over @dreams (user.dreams)-->
    <% @dreams.each do |dream| %>
      <div class="row">
        <div class="col-sm">
<!--First column: display dream image-->
          <% url = "http://res.cloudinary.com/dl33w8wdg/#{dream.photo.identifier}" %>
          <%= image_tag(url) %>
        </div>
        <div class="col-sm">
          <h2><%= dream.title %></h2>
<!--Second column: if bookings is empty, say there are no bookings-->
          <% if dream.bookings.empty? %>
            <p>Whoops - this dream hasn't been booked yet.</p>
          <% else %>
<!--If there are bookings, show the nickname of the bookers and stats-->
            <%= dream.bookings.each do |booking| %>
              <p>Booked by:<%= booking.user.nickname %>, on  <%= booking.created_at %>, for <%= booking.date_booking %></p>
            <% end %>
          <% end %>
        </div>
      </div>
    <% end %>
<!--User's OWN bookings-->
<!--If Bookings are empty, say there are none-->
    <h3>Dreamer <%= @user.email %>'s booked dreams:</h3>
     <% if @user.bookings.empty? %>
       <p>Whoops - I still haven't booked any dream :(</p>
     <% end %>
<!--else, show the user's OWN bookings & update/delete buttons-->
     <ul>
       <% @user.bookings.each do |booking| %>
         <li><%= booking.dream.title %>, booked on <%= booking.date_booking  %>
           <%= link_to 'UPDATE BOOKING', edit_dream_booking_path(booking.dream, booking), class: 'create-button-form' %>
           <%= link_to 'DELETE BOOKING', dream_booking_path(booking.dream, booking),
               method: :delete,
               data: { confirm: "Are you sure?" },
               class: 'create-button-form' %>
         </li>
         <br><br>
       <% end %>
     </ul>
  <% else %>
    <div class="cards">
      <% @dreams.each do |dream| %>
        <div class="card-category" style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), url(<%= dream.photo %>)">
          <%= link_to dream.title, dream_path(dream) %>
        </div>
      <% end %>
    </div>
  <% end %>
</div>


